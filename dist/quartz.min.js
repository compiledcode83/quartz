/* quartz-layout v0.1.1 - 2015-06-04T04:19:52.298Z - https://github.com/r-park/quartz */
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Quartz=e()}(this,function(){"use strict";function t(t){this.columnClass=t.columnClass,this.columnCount=t.columnCount,this.yIndices=[],this.container="string"==typeof t.container?document.querySelector(t.container):t.container,this.items=this.toArray("string"==typeof t.items?document.querySelectorAll(t.items):t.items),t.mediaQueries&&window.matchMedia?this.bindToMediaQueries(t.mediaQueries):this.update()}var e=Array.isArray;return t.prototype={append:function(t){"undefined"==typeof t.length&&(t=[t]);var e=this.container,i=this.createColumnFragments(),n=this.columnCount,s=this.getItemHeights(t);this.refreshYIndices(),this.distributeItemsToColumns(t,i,s);for(var o=0;n>o;o++)e.children[o].appendChild(i[o]);this.items=this.items.concat(this.toArray(t))},prepend:function(t){"undefined"==typeof t.length&&(t=[t]);var e=this.createColumns(),i=this.getItemHeights(t),n=this.getExistingItemHeights(),s=i.concat(n);t=this.toArray(t).concat(this.items),this.resetYIndices(),this.removeColumns(),this.distributeItemsToColumns(t,e.childNodes,s),this.container.appendChild(e),this.items=t},remove:function(t){"undefined"==typeof t.length&&(t=[t]);for(var e,i=this.items,n=t.length;n--;)e=i.indexOf(t[n]),-1!==e&&i.splice(e,1);this.update()},update:function(t){t&&(this.columnCount=t);var e=this.createColumns();this.resetYIndices(),this.items.length&&this.distributeItemsToColumns(this.items,e.childNodes,this.getExistingItemHeights()),this.removeColumns(),this.container.appendChild(e)},distributeItemsToColumns:function(t,e,i){for(var n,s=t.length,o=this.yIndices,r=0;s>r;r++)n=this.getColumnIndex(),o[n]+=i[r],e[n].appendChild(t[r])},getColumnIndex:function(){var t=Math.min.apply(Math,this.yIndices);return this.yIndices.indexOf(t)},getExistingItemHeights:function(){var t=this.items,e=[];if(t.length)for(var i=window.getComputedStyle(t[0]),n=parseInt(i.marginBottom,10),s=0,o=t.length;o>s;s++)e.push(t[s].offsetHeight+n);return e},getItemHeights:function(t){var e=this.createTestColumn(),i=[],n=0,s=t.length;for(n;s>n;n++)e.appendChild(t[n]);this.container.appendChild(e);var o=window.getComputedStyle(t[0]),r=parseInt(o.marginBottom,10);for(n=0;s>n;n++)i.push(t[n].offsetHeight+r);return this.container.removeChild(e),i},refreshYIndices:function(){var t=this.container.children,e=t.length,i=this.yIndices;if(e){i.length=0;for(var n=0;e>n;n++)i.push(t[n].offsetHeight)}},resetYIndices:function(){var t=this.columnCount,e=this.yIndices;for(e.length=0;t--;)e.push(0)},createColumns:function(){for(var t,e=this.columnCount,i=document.createDocumentFragment();e--;)t=document.createElement("div"),t.className=this.columnClass,i.appendChild(t);return i},createColumnFragments:function(){for(var t=[],e=this.columnCount;e--;)t.push(document.createDocumentFragment());return t},createTestColumn:function(){var t=document.createElement("div"),e=this.container.firstChild;return t.className=this.columnClass,t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",e&&(t.style.width=window.getComputedStyle(e).width),t},removeColumns:function(){for(var t=this.container;t.firstChild;)t.removeChild(t.firstChild)},toArray:function(t){if(e(t))return t;var i=t.length;if("number"==typeof i){for(var n=new Array(i);i--;)n[i]=t[i];return n}return[t]},bindToMediaQueries:function(t){for(var e=t.length;e--;)this.bindToMediaQueryList(t[e])},bindToMediaQueryList:function(t){var e=this,i=function(i){i.matches&&e.update(t.columns)},n=window.matchMedia(t.query);n.addListener(i),i(n)}},t});
//# sourceMappingURL=quartz.min.js.map